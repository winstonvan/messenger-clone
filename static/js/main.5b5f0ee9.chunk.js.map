{"version":3,"sources":["components/History.js","components/Database.js","components/Chat.js","components/Login.js","components/Main.js","App.js","index.js"],"names":["History","username","message","isUser","currentUser","className","Card","style","width","height","CardContent","paddingTop","paddingRight","paddingBottom","paddingLeft","Typography","variant","component","color","db","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","Chat","props","usernameRef","location","state","useState","input","setInput","messages","setMessages","useEffect","collection","orderBy","onSnapshot","snapshot","docs","map","doc","id","data","FormControl","InputLabel","Input","value","onChange","event","target","IconButton","size","disabled","type","onClick","preventDefault","add","timestamp","FieldValue","serverTimestamp","borderRadius","Login","setUsername","password","setPassword","register","login","history","push","pathname","TextField","required","label","currentTarget","setUsernameField","autoComplete","setPasswordField","Button","postData","forEach","setTimeout","console","clear","log","length","i","user","pass","startLogin","Main","exact","path","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5b5f0ee9.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"../styles/History.css\";\r\nimport { Card, CardContent, Typography } from \"@material-ui/core\";\r\n\r\nfunction History({ username, message, currentUser }) {\r\n  const isUser = username === currentUser;\r\n\r\n  return (\r\n    <div className=\"history\">\r\n      <div className={isUser === true ? \"username\" : \"username__other\"}>\r\n        {username}\r\n      </div>\r\n      <div className={isUser === true ? \"content\" : \"content__other\"}>\r\n        <Card\r\n          className={isUser === true ? \"message\" : \"message__other\"}\r\n          style={{\r\n            width: \"fit-content\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          <CardContent\r\n            className=\"card__content\"\r\n            style={{\r\n              paddingTop: \"5px\",\r\n              paddingRight: \"10px\",\r\n              paddingBottom: \"5px\",\r\n              paddingLeft: \"10px\",\r\n            }}\r\n          >\r\n            <Typography\r\n              className={isUser === true ? `typography` : `typography__other`}\r\n              variant=\"h5\"\r\n              component=\"h2\"\r\n              color=\"white\"\r\n            >\r\n              {message}\r\n            </Typography>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default History;\r\n","import firebase from \"firebase\";\r\n\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseApp = firebase.initializeApp({\r\n  apiKey: \"AIzaSyAICn1aR9oLycshcw2pvXBvPpo2-b0r4II\",\r\n  authDomain: \"messenger-49479.firebaseapp.com\",\r\n  projectId: \"messenger-49479\",\r\n  storageBucket: \"messenger-49479.appspot.com\",\r\n  messagingSenderId: \"550368525677\",\r\n  appId: \"1:550368525677:web:53629bd6c03377266eee64\",\r\n  measurementId: \"G-F8RNZ1MSB3\",\r\n});\r\n\r\nconst db = firebaseApp.firestore();\r\n\r\nexport default db;\r\n","import \"../styles/Chat.css\";\r\nimport History from \"../components/History\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { FormControl, Input, InputLabel, IconButton } from \"@material-ui/core\";\r\nimport db from \"./Database\";\r\nimport firebase from \"firebase\";\r\n\r\nfunction Chat(props) {\r\n  // get username\r\n  const usernameRef = props.location.state.username;\r\n\r\n  // states\r\n  const [input, setInput] = useState(\"\"); // text field\r\n  const [messages, setMessages] = useState([{ username: \"\", message: \"\" }]); // messages state stored in an array\r\n\r\n  // populate chat\r\n  useEffect(() => {\r\n    db.collection(\"messages\")\r\n      .orderBy(\"timestamp\", \"desc\")\r\n      .onSnapshot((snapshot) => {\r\n        setMessages(\r\n          snapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            username: doc.data().username,\r\n            message: doc.data().message,\r\n          }))\r\n        );\r\n      });\r\n  }, []);\r\n\r\n  // send message\r\n  const sendMessage = (event) => {\r\n    event.preventDefault(); // prevent refreshing\r\n\r\n    db.collection(\"messages\").add({\r\n      message: input,\r\n      username: usernameRef,\r\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n    });\r\n\r\n    setInput(\"\"); // clear text field\r\n  };\r\n\r\n  return (\r\n    <div className=\"Chat\">\r\n      <div className=\"header__container\">\r\n        <div className=\"content\">\r\n          <div className=\"title\">\r\n            Welcome, <span className=\"username\">{usernameRef}</span>!\r\n          </div>\r\n        </div>\r\n        <div className=\"developer\">Developed by Winston Van</div>\r\n      </div>\r\n\r\n      <div className=\"messages__container\">\r\n        {/* MESSAGE HISTORY */}\r\n        <div className=\"message__history\">\r\n          {messages.map((\r\n            { id, username, message, currentUser } //\"message\" variable is used to map all strings in \"messages\" array\r\n          ) => (\r\n            <History\r\n              key={id}\r\n              username={username}\r\n              message={message}\r\n              currentUser={usernameRef}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form__container\">\r\n        {/* FORM */}\r\n        <form className=\"form\">\r\n          <FormControl className=\"form__control\">\r\n            <InputLabel className=\"label\" style={{ color: \"#264653\" }}>\r\n              Aa\r\n            </InputLabel>\r\n            <Input\r\n              className=\"input\"\r\n              value={input}\r\n              onChange={(event) => setInput(event.target.value)}\r\n            />\r\n            <IconButton\r\n              size=\"small\"\r\n              variant=\"contained\"\r\n              disabled={!input}\r\n              type=\"submit\"\r\n              onClick={sendMessage}\r\n              className=\"icon\"\r\n              style={{\r\n                borderRadius: 0,\r\n              }}\r\n            >\r\n              <SendIcon />\r\n            </IconButton>\r\n          </FormControl>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n","import \"../styles/Login.css\";\r\nimport { TextField, Button } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\n\r\nimport \"firebase/auth\";\r\nimport db from \"../components/Database\";\r\n\r\n// login / create user\r\n\r\nfunction Login(props) {\r\n  const [username, setUsername] = useState(\"\"); // username field state\r\n  const [password, setPassword] = useState(\"\"); // password field state\r\n\r\n  // set username field\r\n  const setUsernameField = (event) => {\r\n    setUsername(event.currentTarget.value);\r\n  };\r\n\r\n  // set password field\r\n  const setPasswordField = (event) => {\r\n    setPassword(event.currentTarget.value);\r\n  };\r\n\r\n  const register = (event) => {\r\n    db.collection(\"users\").add({\r\n      username: { username },\r\n      password: { password },\r\n    });\r\n\r\n    return;\r\n  };\r\n\r\n  const login = (event) => {\r\n    props.history.push({\r\n      pathname: \"/chat\",\r\n      state: { username: username },\r\n    });\r\n  };\r\n\r\n  const startLogin = (event) => {\r\n    event.preventDefault(); // prevent refreshing\r\n    const postData = [];\r\n\r\n    // push database data to postData[]\r\n    db.collection(\"users\").onSnapshot((snapshot) => {\r\n      snapshot.forEach((doc) => postData.push({ ...doc.data() }));\r\n    });\r\n\r\n    setTimeout(function () {\r\n      console.clear();\r\n      console.log(postData);\r\n\r\n      console.log(\r\n        \"Searching database(\" + postData.length + \") for: \" + username\r\n      );\r\n\r\n      if (postData.length === 0) {\r\n        console.log(\"No accounts in database. Registering account.\");\r\n        register();\r\n        login();\r\n        return;\r\n      }\r\n\r\n      // find user/pass combination in postData[]\r\n      for (var i = 0; i < postData.length; i++) {\r\n        var user = postData[i].username.username;\r\n        var pass = postData[i].password.password;\r\n\r\n        if (user === username) {\r\n          console.log(\"Found matching username. Checking password...\");\r\n\r\n          if (pass === password) {\r\n            console.log(\"Password matches.\");\r\n            login();\r\n            return;\r\n          } else {\r\n            console.log(\"Password does not match.\");\r\n          }\r\n        } else if (i === postData.length - 1) {\r\n          console.log(\"User does not exist. Registering account.\");\r\n          register();\r\n          login();\r\n          return;\r\n        } else {\r\n          console.log(\"Username doesn't match. Trying next...\");\r\n        }\r\n        console.log(\"______________________\");\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  return (\r\n    <div className=\"login__container\">\r\n      <div className=\"login__title\">Welcome</div>\r\n\r\n      <form>\r\n        <div className=\"login\">\r\n          <TextField\r\n            className=\"username\"\r\n            required\r\n            label=\"Username\"\r\n            id=\"standard-required\"\r\n            onChange={(event) => setUsernameField(event, username)}\r\n          />\r\n          <TextField\r\n            className=\"password\"\r\n            id=\"standard-password-input\"\r\n            required\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            autoComplete=\"current-password\"\r\n            onChange={(event) => setPasswordField(event, password)}\r\n          />\r\n          <Button\r\n            className=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={(event) => startLogin(event)}\r\n          >\r\n            Login\r\n          </Button>\r\n        </div>\r\n      </form>\r\n\r\n      <div className=\"instructions\">\r\n        Login using any unused login credentials to register an account.\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport Chat from \"./Chat\";\r\nimport Login from \"./Login\";\r\n\r\nconst Main = () => {\r\n  return (\r\n    <Switch>\r\n      <Route exact path=\"/\" component={Login}></Route>\r\n      <Route exact path=\"/chat\" component={Chat}></Route>\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import Main from \"./components/Main\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Main />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}