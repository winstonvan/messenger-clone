(this["webpackJsonpmessenger-clone"]=this["webpackJsonpmessenger-clone"]||[]).push([[0],{103:function(e,s,n){"use strict";n.r(s);var a=n(1),t=n(16),c=n.n(t),r=n(58),o=n(17),i=n(43),l=(n(84),n(85),n(131)),d=n(135),u=n(136),m=n(7);var j=function(e){var s=e.username,n=e.message,a=s===e.currentUser;return Object(m.jsxs)("div",{className:"history",children:[Object(m.jsx)("div",{className:!0===a?"username":"username__other",children:s}),Object(m.jsx)("div",{className:!0===a?"content":"content__other",children:Object(m.jsx)(l.a,{className:!0===a?"message":"message__other",style:{width:"fit-content",height:"fit-content"},children:Object(m.jsx)(d.a,{className:"card__content",style:{paddingTop:"5px",paddingRight:"10px",paddingBottom:"5px",paddingLeft:"10px"},children:Object(m.jsx)(u.a,{className:!0===a?"typography":"typography__other",variant:"h5",component:"h2",color:"white",children:n})})})})]})},h=n(70),p=n.n(h),g=n(137),b=n(142),f=n(138),O=n(139),x=n(54),_=x.a.initializeApp({apiKey:"AIzaSyAICn1aR9oLycshcw2pvXBvPpo2-b0r4II",authDomain:"messenger-49479.firebaseapp.com",projectId:"messenger-49479",storageBucket:"messenger-49479.appspot.com",messagingSenderId:"550368525677",appId:"1:550368525677:web:53629bd6c03377266eee64",measurementId:"G-F8RNZ1MSB3"}).firestore();var v=function(e){var s=e.location.state.username,n=Object(a.useState)(""),t=Object(i.a)(n,2),c=t[0],r=t[1],o=Object(a.useState)([{username:"",message:""}]),l=Object(i.a)(o,2),d=l[0],u=l[1];return Object(a.useEffect)((function(){_.collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){u(e.docs.map((function(e){return{id:e.id,username:e.data().username,message:e.data().message}})))}))}),[]),Object(m.jsxs)("div",{className:"Chat",children:[Object(m.jsxs)("div",{className:"header__container",children:[Object(m.jsx)("div",{className:"content",children:Object(m.jsxs)("div",{className:"title",children:["Welcome, ",Object(m.jsx)("span",{className:"username",children:s}),"!"]})}),Object(m.jsx)("div",{className:"developer",children:"Developed by Winston Van"})]}),Object(m.jsx)("div",{className:"messages__container",children:Object(m.jsx)("div",{className:"message__history",children:d.map((function(e){var n=e.id,a=e.username,t=e.message;e.currentUser;return Object(m.jsx)(j,{username:a,message:t,currentUser:s},n)}))})}),Object(m.jsx)("div",{className:"form__container",children:Object(m.jsx)("form",{className:"form",children:Object(m.jsxs)(g.a,{className:"form__control",children:[Object(m.jsx)(b.a,{className:"label",style:{color:"#264653"},children:"Aa"}),Object(m.jsx)(f.a,{className:"input",value:c,onChange:function(e){return r(e.target.value)}}),Object(m.jsx)(O.a,{size:"small",variant:"contained",disabled:!c,type:"submit",onClick:function(e){e.preventDefault(),_.collection("messages").add({message:c,username:s,timestamp:x.a.firestore.FieldValue.serverTimestamp()}),r("")},className:"icon",style:{borderRadius:0},children:Object(m.jsx)(p.a,{})})]})})})]})},N=n(71),y=(n(97),n(141)),w=n(140);n(98);var S=function(e){var s=Object(a.useState)(""),n=Object(i.a)(s,2),t=n[0],c=n[1],r=Object(a.useState)(""),o=Object(i.a)(r,2),l=o[0],d=o[1],u=function(e){_.collection("users").add({username:{username:t},password:{password:l}})},j=function(s){e.history.push({pathname:"/chat",state:{username:t}})};return Object(m.jsxs)("div",{className:"login__container",children:[Object(m.jsx)("div",{className:"login__title",children:"Welcome"}),Object(m.jsx)("form",{children:Object(m.jsxs)("div",{className:"login",children:[Object(m.jsx)(y.a,{className:"username",required:!0,label:"Username",id:"standard-required",onChange:function(e){return function(e){c(e.currentTarget.value)}(e)}}),Object(m.jsx)(y.a,{className:"password",id:"standard-password-input",required:!0,label:"Password",type:"password",autoComplete:"current-password",onChange:function(e){return function(e){d(e.currentTarget.value)}(e)}}),Object(m.jsx)(w.a,{className:"submit",variant:"contained",color:"primary",onClick:function(e){return function(e){e.preventDefault();var s=[];_.collection("users").onSnapshot((function(e){e.forEach((function(e){return s.push(Object(N.a)({},e.data()))}))})),setTimeout((function(){if(console.clear(),console.log(s),console.log("Searching database("+s.length+") for: "+t),0===s.length)return console.log("No accounts in database. Registering account."),u(),void j();for(var e=0;e<s.length;e++){var n=s[e].username.username,a=s[e].password.password;if(n===t){if(console.log("Found matching username. Checking password..."),a===l)return console.log("Password matches."),void j();console.log("Password does not match.")}else{if(e===s.length-1)return console.log("User does not exist. Registering account."),u(),void j();console.log("Username doesn't match. Trying next...")}console.log("______________________")}}),1e3)}(e)},children:"Login"})]})}),Object(m.jsx)("div",{className:"instructions",children:"Login using any unused login credentials to register an account."})]})},C=function(){return Object(m.jsxs)(o.c,{children:[Object(m.jsx)(o.a,{exact:!0,path:"/",component:S}),Object(m.jsx)(o.a,{exact:!0,path:"/chat",component:v})]})};var I=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(C,{})})};c.a.render(Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(r.a,{children:Object(m.jsx)(I,{})})}),document.getElementById("root"))},84:function(e,s,n){},85:function(e,s,n){},97:function(e,s,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.5b5f0ee9.chunk.js.map